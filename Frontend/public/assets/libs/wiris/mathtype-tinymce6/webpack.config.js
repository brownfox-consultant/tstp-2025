let e=require("path"),t=require("webpack"),s=require("terser-webpack-plugin"),{CleanWebpackPlugin:r}=require("clean-webpack-plugin");module.exports=(i,n)=>({entry:{app:e.resolve(__dirname,"./global.js")},output:{path:e.resolve(__dirname,""),filename:"./plugin.min.js",globalObject:"this"},devServer:{devMiddleware:{writeToDisk:!0},static:{directory:e.join(__dirname,"./")},onListening:i&&i.devServer?i.devServer.onListening:"",hot:!0,port:9007,host:"0.0.0.0"},watch:!1,optimization:{minimize:!0,minimizer:[new s({terserOptions:{format:{comments:!1}},extractComments:!1})]},mode:"none",module:{rules:[{test:/\.js$/,exclude:/node_modules\/(?!(@wiris\/mathtype-html-integration-devkit)\/).*/,use:{loader:"babel-loader",options:{presets:["@babel/env"]}}},{test:/\.wasm$/,type:"asset/inline"},{test:/\.css$/,use:["style-loader","css-loader"]},{test:/\.(png|jpg|gif)$/i,use:[{loader:"url-loader",options:{limit:8192}}]},{test:/\.svg$/,use:["raw-loader"]}]},stats:{colors:!0},experiments:{topLevelAwait:!0,asyncWebAssembly:!0},plugins:[new t.EnvironmentPlugin({SERVICE_PROVIDER_URI:"https://www.wiris.net/demo/plugins/app",SERVICE_PROVIDER_SERVER:"java"}),new r({root:process.cwd(),verbose:!0,dry:!1,cleanOnceBeforeBuildPatterns:["app.*"]})]});